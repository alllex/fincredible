AUI().ready(function(){});Liferay.Portlet.ready(function(a,b){});Liferay.on("allPortletsReady",function(){YUI().use("node",function(a){a.one("body").delegate("click",function(b){if(this.getAttribute("target")===""){if(/^(f|ht)tps?:\/\//i.test(this.getAttribute("href"))){this.setAttribute("target","_blank")}}},".link-list a")})});$(document).ready(function(){initNavPortletMenus();initMobileNavigation();initMobileNavPortlet();initSelected();addUpperNav()});function addUpperNav(){if(window.location.href.indexOf("/uutiset")!==-1||window.location.href.indexOf("/nyhetsarkiv")!==-1||window.location.href.indexOf("/udasarkkadah")!==-1||window.location.href.indexOf("/odasvuorka")!==-1||window.location.href.indexOf("/whatsnew")!==-1){var a=$(".taglib-page-iterator")[0];var b=a.cloneNode(true);b.id=b.id+"pre";b.querySelectorAll(".taglib-icon").forEach(function(c){c.id=c.id+"pre"});$(".subscribe-action")[0].after(b)}}function initNavPortletMenus(){var a=$("#column-1 .nav-menu").eq(0);if(a.length>0){attachMenuToggles(a);initToggles(a)}}function attachMenuToggles(f){f=$(f);var e=f.children(".layouts.level-1");if(e.length>0){appendToggles(e.children("li"));var d=f.find(".layouts.level-2");if(d.length>0){appendToggles(d.children("li"));var c=f.find(".layouts.level-3");if(c.length>0){appendToggles(c.children("li"));var b=f.find(".layouts.level-4");if(b.length>0){appendToggles(b.children("li"))}var a=f.find(".layouts.level-5");if(a.length>0){appendToggles(a.children("li"))}}}}}function appendToggles(a){a=$(a);a.each(function(){if($(this).children("ul").length>0){var b=$(this);b.children("a").append("<span onclick='toggleMenu(event, this)' class='nav-toggle'></span>")}})}function initToggles(a){if(a.length>0){var b=a.parent();a.addClass("show-children");b.addClass("is-open");if(!a.find(".selected").length>0){$(".nav-menu h2 a").addClass("is-selected")}}else{var c=$(".nav-menu h2 a").eq(0);if(c.length>0){c.addClass("is-selected")}}}function initSelected(){var b=$(".nav-menu").eq(0);var a=b.find("li.selected");a.addClass("show-children");a.parentsUntil(".nav-menu","li").addClass("show-children")}function toggleMenu(c,b){c.preventDefault();var a=$(b);var d=a.closest("li");a.toggleClass("rotate-up");d.toggleClass("show-children")}function attachMobileMenuToggles(c){c=$(c);var b=c.find(".layouts.level-1");var a=b.children("li");a.each(function(){if($(this).children("ul").length>0){var d=$(this);d.children("a").append("<span onclick='toggleMenu(event, this)' class='nav-toggle'></span>")}})}function initMobileNavPortlet(){var a=$(".mob-nav-menu");if(a.length>0){var b=a.eq(0);attachMobileMenuToggles(b)}}function initMobileNavigation(){var b=$(".mobile-navigation-opener");var a=$("#mobile-navigation");b.on("click",function(c){if(a.hasClass("closed")){a.removeClass("closed");$(document).on("mouseup touchend",handleDocumentClick)}else{$(document).off("mouseup touchend",handleDocumentClick);a.addClass("closed")}$("html,body").animate({scrollTop:0},0)});$(".opener").on("click",function(c){c.preventDefault();$(this).toggleClass("open");$(this).parent().siblings("ul").toggleClass("closed")})}function handleDocumentClick(c){var b=$(".mobile-navigation-opener");var a=$("#mobile-navigation");if(!b.is(c.target)&&!a.is(c.target)&&a.has(c.target).length===0){$(document).off("mouseup touchend",handleDocumentClick);a.addClass("closed")}}var portletMobileNavigation;AUI().use("transition","aui-node","aui-io-request",function(a){portletMobileNavigation=function(c){var b=a.one(c).get("parentNode");var d=b.one(".mobile-navigation-portlet");d.toggleClass("open")}});var waitForFinalEvent=(function(){var a={};return function(d,b,c){if(!c){c="timer-clear-unique-id"}if(a[c]){clearTimeout(a[c])}a[c]=setTimeout(d,b)}})();$(window).resize(function(){waitForFinalEvent(function(){$(".luontoon-carousel").carousel("refresh")},300,"luontoon-carousel-resize")});